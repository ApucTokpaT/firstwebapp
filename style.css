/* --- Базовые настройки и переменные --- */
:root { /* ... без изменений ... */ }
body.dark { /* ... без изменений ... */ }

/* --- Стили Body + Звездное небо (как было) --- */
body { /* ... без изменений ... */ }
.stars-background { /* ... без изменений ... */ }
#stars-static-1, #stars-static-2 { /* ... без изменений ... */ }
.moon { /* ... без изменений ... */ }
.planet { /* ... без изменений ... */ }
.planet1 { /* ... без изменений ... */ }
.planet1::before { /* ... без изменений ... */ }
.planet2 { /* ... без изменений ... */ }
.shooting-star { /* ... без изменений ... */ }
.shooting-star::before { /* ... без изменений ... */ }
.star1, .star2, .star3, .star4 { /* ... без изменений ... */ }
@keyframes slowRotate { /* ... */ } @keyframes slowMove { /* ... */ }
@keyframes slowMoveDiagonal { /* ... */ } @keyframes shooting { /* ... */ }
@keyframes twinkle { /* ... */ } @keyframes fadeInSlideUp { /* ... */ }
@keyframes fadeOutSlideDown { /* ... */ }

/* --- Контейнер для основного контента --- */
.content-wrapper { /* ... без изменений ... */
    background-color: rgba(var(--tg-theme-secondary-bg-color-value), 0.75);
    backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
    padding: 20px 15px; border-radius: 12px;
    border: 1px solid rgba(var(--tg-theme-hint-color-rgb), 0.2);
    max-width: 650px; width: 100%; box-sizing: border-box;
    position: relative; z-index: 10; opacity: 0; transform: translateY(15px);
    animation: fadeInSlideUp 0.6s 0.1s ease-out forwards;
    max-height: calc(100vh - 40px); overflow-y: auto;
    &::-webkit-scrollbar { width: 6px; }
    &::-webkit-scrollbar-track { background: rgba(var(--tg-theme-secondary-bg-color-value), 0.1); border-radius: 3px; }
    &::-webkit-scrollbar-thumb { background-color: var(--tg-theme-hint-color); border-radius: 3px; border: 1px solid rgba(var(--tg-theme-secondary-bg-color-value), 0.1); }
}

/* --- Стили текста --- */
h1 { /* ... без изменений ... */ }
p { /* ... без изменений ... */ }
#user-info { /* ... без изменений ... */ }

/* --- Форма добавления/редактирования --- */
.task-form {
    margin-bottom: 20px;
    text-align: left;
}
.main-input-group {
    /* display: flex; больше не нужен, т.к. там только инпут */
    margin-bottom: 12px; /* Отступ под основным инпутом */
}
#new-task-input {
    /* flex-grow: 1; больше не нужно */
    width: 100%; /* Занимает всю ширину */
    min-width: 0; padding: 10px 14px; border: 1px solid rgba(var(--tg-theme-hint-color-rgb), 0.3);
    border-radius: 8px; font-size: 1em; font-family: 'Poppins', sans-serif; background-color: rgba(var(--tg-theme-bg-color-rgb), 0.8);
    color: var(--tg-theme-text-color); transition: border-color 0.3s ease, box-shadow 0.3s ease; -webkit-appearance: none;
    appearance: none; min-height: 44px; box-sizing: border-box; touch-action: manipulation; z-index: 2; position: relative;
}
#new-task-input::placeholder { color: var(--tg-theme-hint-color); opacity: 0.7; }
#new-task-input:focus { outline: none; border-color: var(--tg-theme-button-color); box-shadow: 0 0 0 2px rgba(var(--tg-theme-button-color-rgb), 0.4); }

/* Убираем стили для старой кнопки #add-task-btn, если они были специфичны */
/* #add-task-btn { flex-shrink: 0; ... } */

.details-input-group { /* ... без изменений ... */
    display: flex; flex-wrap: wrap; gap: 10px 15px; margin-bottom: 15px; /* Увеличим отступ снизу */ align-items: center;
}
.input-field { /* ... без изменений ... */
    display: flex; flex-direction: column; gap: 4px; flex: 1 1 150px; min-width: 120px;
}
.input-field label { /* ... без изменений ... */
    font-size: 0.8em; color: var(--tg-theme-hint-color); font-weight: 600; text-align: left;
}
.input-field select, .input-field input[type="date"], .input-field input[type="text"] { /* ... без изменений ... */
    width: 100%; padding: 8px 10px; border: 1px solid rgba(var(--tg-theme-hint-color-rgb), 0.3); border-radius: 6px; font-size: 0.9em; font-family: 'Poppins', sans-serif; background-color: rgba(var(--tg-theme-bg-color-rgb), 0.8); color: var(--tg-theme-text-color); box-sizing: border-box; min-height: 38px;
}
.input-field input[type="date"] { color-scheme: dark; }
.input-field-tags { flex-basis: 100%; }

/* --- Новые стили для кнопок формы --- */
.form-action-buttons {
    display: flex;
    gap: 10px; /* Промежуток между кнопками Добавить/Отмена */
    margin-top: 15px; /* Отступ над кнопками */
}
.form-action-buttons button {
    flex-grow: 1; /* Кнопки растягиваются на доступную ширину */
    padding: 12px 15px; /* Сделаем кнопки формы чуть крупнее */
    font-size: 1em;
}
/* Стили для основной кнопки формы (Добавить/Сохранить) */
.form-action-buttons button.primary-form-btn {
     /* Использует стили базовой кнопки 'button' */
     /* Можно добавить специфичные стили, если нужно */
     /* background-color: ...; */
}
/* Стили для вторичной кнопки формы (Отмена) */
.form-action-buttons button#cancel-edit-btn {
    /* Использует стили .secondary-btn */
    flex-grow: 0; /* Кнопка отмены не растягивается */
    padding: 12px 20px; /* Можно сделать паддинг другим */
}

/* --- Контролы: Фильтры и Счетчик --- */
.controls { /* ... без изменений ... */
    display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;
    padding: 10px 5px; border-bottom: 1px solid rgba(var(--tg-theme-hint-color-rgb), 0.15);
    flex-wrap: wrap; gap: 10px;
}
.filters button.filter-btn { /* ... без изменений ... */
    background: none; border: 1px solid var(--tg-theme-hint-color); color: var(--tg-theme-hint-color);
    padding: 5px 12px; border-radius: 15px; font-size: 0.85em; font-weight: 600;
    cursor: pointer; transition: all 0.2s ease; margin: 0 3px;
}
.filters button.filter-btn:hover { /* ... без изменений ... */
    background-color: rgba(var(--tg-theme-hint-color-rgb), 0.2); border-color: var(--tg-theme-text-color);
    color: var(--tg-theme-text-color);
}
.filters button.filter-btn.active { /* ... без изменений ... */
    background-color: var(--tg-theme-button-color); border-color: var(--tg-theme-button-color);
    color: var(--tg-theme-button-text-color); box-shadow: 0 2px 5px rgba(var(--tg-theme-button-color-rgb), 0.3);
}
.task-counter { /* ... без изменений ... */
    font-size: 0.9em; color: var(--tg-theme-hint-color); font-weight: 600;
}

/* --- Заголовок списка --- */
h2 { /* ... без изменений ... */
    font-family: 'Raleway', sans-serif; font-size: 1.3em; margin-top: 10px; margin-bottom: 10px;
    color: var(--tg-theme-text-color); text-align: left; padding-left: 5px;
}

/* --- Список Задач --- */
#task-list { /* ... без изменений ... */ }
#task-list li { /* ... без изменений ... */ }
#task-list li.visible { /* ... без изменений ... */ }
#task-list li.removing { /* ... без изменений ... */ }
#task-list li:hover { /* ... без изменений ... */ }
#task-list li.completed { /* ... без изменений ... */ }
#task-list li.completed .task-content .task-text { /* ... без изменений ... */ }
.task-item-content { /* ... без изменений ... */ }
.task-checkbox { /* ... без изменений ... */ }
.task-details { /* ... без изменений ... */ }
.task-text { /* ... без изменений ... */ }
.task-meta { /* ... без изменений ... */ }
.task-due-date, .task-priority { /* ... без изменений ... */ }
.task-due-date.overdue { /* ... без изменений ... */ }
.task-priority.high { /* ... */ } .task-priority.medium { /* ... */ } .task-priority.low { /* ... */ }
.task-tags { /* ... без изменений ... */ }
.tag { /* ... без изменений ... */ }
.task-actions { /* ... без изменений ... */ }
.task-actions button { /* ... без изменений ... */ }
.task-actions button:hover { /* ... */ } .task-actions .delete-btn:hover { /* ... */ } .task-actions button:active { /* ... */ }
#task-list .no-tasks { /* ... без изменений ... */ }
#task-list .no-tasks.visible { /* ... */ }

/* --- Вторичные кнопки (Отмена, Очистка) --- */
/* Базовый стиль для .secondary-btn теперь используется для Отмены в форме и Очистки */
button.secondary-btn { /* ... без изменений ... */
    background-color: transparent; color: var(--tg-theme-hint-color); border: 1px solid var(--tg-theme-hint-color);
    box-shadow: none; font-weight: 400; opacity: 0.8; transition: all 0.2s ease;
}
button.secondary-btn:hover { /* ... без изменений ... */
    background-color: rgba(var(--tg-theme-hint-color-rgb), 0.1); color: var(--tg-theme-text-color);
    border-color: var(--tg-theme-text-color); opacity: 1; transform: translateY(0); filter: none;
}
button.secondary-btn:active { /* ... без изменений ... */
    background-color: rgba(var(--tg-theme-hint-color-rgb), 0.2); transform: scale(0.98); filter: none;
}
/* Специфичные стили для кнопки Очистки */
button.clear-btn { /* ... без изменений ... */
    display: block; width: fit-content; margin: 15px auto 10px; padding: 6px 15px; font-size: 0.85em;
    color: var(--priority-high-color); border-color: var(--priority-high-color); opacity: 0.7;
}
button.clear-btn:hover { /* ... без изменений ... */
    background-color: rgba(255, 123, 123, 0.1); border-color: var(--priority-high-color);
    color: var(--priority-high-color); opacity: 1;
}

/* --- Основные кнопки управления --- */
.button-container { /* ... без изменений ... */
    margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(var(--tg-theme-hint-color-rgb), 0.2);
    display: flex; justify-content: space-around; flex-wrap: wrap; gap: 10px;
}
/* Общий стиль для ВСЕХ кнопок (включая кнопки формы) */
button {
    font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 0.95em; padding: 10px 15px; margin: 0;
    border: none; border-radius: 8px; cursor: pointer; background-color: var(--tg-theme-button-color); color: var(--tg-theme-button-text-color);
    box-shadow: 0 3px 8px rgba(var(--tg-theme-button-color-rgb), 0.3); transition: all 0.2s ease; -webkit-tap-highlight-color: transparent;
    min-height: 42px; box-sizing: border-box;
    /* Убираем анимацию по умолчанию отсюда, будем применять к конкретным */
    /* opacity: 0; transform: translateY(10px); animation: fadeInSlideUp 0.5s 0.6s ease-out forwards; */
}
/* Применяем анимацию появления только к кнопкам внизу */
.button-container button {
    opacity: 0; transform: translateY(10px);
    animation: fadeInSlideUp 0.5s 0.6s ease-out forwards;
}

/* Ховер/эктив для НЕ-вторичных и НЕ-действий-задачи кнопок */
button:not(.secondary-btn):not(.task-actions button):hover {
    filter: brightness(1.15); box-shadow: 0 4px 12px rgba(var(--tg-theme-button-color-rgb), 0.4); transform: translateY(-2px);
}
button:not(.secondary-btn):not(.task-actions button):active {
    filter: brightness(0.9); transform: translateY(0px) scale(0.98); box-shadow: 0 1px 4px rgba(var(--tg-theme-button-color-rgb), 0.25);
}

/* Стили для кнопки Закрыть */
#close-btn { /* ... без изменений ... */
    background-color: var(--tg-theme-hint-color); opacity: 0.8; box-shadow: 0 3px 8px rgba(var(--tg-theme-hint-color-rgb), 0.2);
}
#close-btn:hover { /* ... без изменений ... */
    box-shadow: 0 4px 12px rgba(var(--tg-theme-hint-color-rgb), 0.3); transform: translateY(-2px); filter: brightness(1.1); opacity: 1;
}
#close-btn:active { /* ... без изменений ... */
    box-shadow: 0 1px 4px rgba(var(--tg-theme-hint-color-rgb), 0.2); transform: translateY(0px) scale(0.98); filter: brightness(0.95); opacity: 0.9;
}